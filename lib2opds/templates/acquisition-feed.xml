<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/terms/" xmlns:opds="http://opds-spec.org/2010/catalog">
  <id>{{ feed.id }}</id>
  <link rel="self" href="{{ feed.link_self_href }}" type="application/atom+xml;profile=opds-catalog;kind=acquisition"/>
  <link rel="start" href="{{ feed.link_start_href }}" type="application/atom+xml;profile=opds-catalog;kind=navigation"/>
  <link rel="up" href="{{ feed.link_up_href }}" type="application/atom+xml;profile=opds-catalog;kind=navigation"/>

  <title>{{ feed.title }}</title>
  <updated>{{ feed.updated }}</updated>

  <author>
    <name>lib2opds generator</name>
    <uri>http://opds-spec.org</uri>
  </author>
  {% for entry in feed.entries  | sort(attribute="publication.title") %}
  <entry>
    <title>{{ entry.publication.title }}</title>
    <id>{{ entry.id }}</id>
    <updated>{{ feed.updated }}</updated>
    {% for author in entry.publication.authors %}
    <author>
      <name>{{ author }}</name>
    </author>
    {% endfor %}
    {% if entry.publication.description %}
    <content type="text">{{ entry.publication.description }}</content>
    {% endif %}
    {% if entry.publication.cover_href %}
    <link rel="http://opds-spec.org/image" href="{{ entry.publication.cover_href }}" type="{{ entry.publication.cover_mimetype }}"/>
    {% endif %}
    <link rel="http://opds-spec.org/acquisition" href="{{ entry.acquisition_link }}" type="{{ entry.publication.mimetype }}"/>
 </entry>
  {% endfor %}
</feed>
